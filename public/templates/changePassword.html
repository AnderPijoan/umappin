
<h1>Change password</h1>
<p>

<form action="/accounts/password/change" id="changePasswordForm">

    <div class="clearfix  " id="password_field">
        <label for="password">Password</label>
        <div class="input">

            <input type="password" id="password" name="password" >

            <span class="help-inline"></span>
            <span class="help-block">Minimum length: 5, Required</span>
        </div>
    </div>

    <div class="clearfix  " id="repeatPassword_field">
        <label for="repeatPassword">Repeat chosen password</label>
        <div class="input">

            <input type="password" id="repeatPassword" name="repeatPassword" >

            <span class="help-inline"></span>
            <span class="help-block"></span>
        </div>
    </div>

    <input type="submit" value="Change my password" class="btn btn-primary">

</form>

</p>

    <script>

        function submitChangePassword() {
            $('#actionResult').css('display','none');
            var forgotPasswordPost = $.post(
                    $('#changePasswordForm').attr('action'),
                    "password=" + $('#password').val() +
                    "&repeatPassword=" + $('#repeatPassword').val()
            );
            forgotPasswordPost.done(function( data ) {
                $('#actionResult').css('display','block').empty().html(
                        "<div class='alert alert-info'>" + data + "</div>");
                $('#password').val('');
                $('#repeatPassword').val('');
            });
            forgotPasswordPost.error(function( data ) {
                $('#actionResult').css('display','block').empty().html(
                        "<div class='alert alert-error'>" + data.responseText + "</div>");
            });
        }

        $('#changePasswordForm').submit(function(event) {
            event.preventDefault();
            submitChangePassword();
        });

    </script>

</div>

