// Generated by CoffeeScript 1.4.0
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  umappin.Router = (function(_super) {

    __extends(Router, _super);

    function Router() {
      return Router.__super__.constructor.apply(this, arguments);
    }

    Router.prototype.subroutes = {};

    Router.prototype.params = null;

    Router.prototype.routes = {
      'account': 'account',
      'account/:id': 'account',
      'featuresMap': 'featuresMap',
      'markersMap': 'markersMap',
      'searchMap': 'searchMap',
      'routesMap': 'routesMap',
      'photosMap': 'photosMap',
      'messages/*subroute': 'messages',
      'wall/*subroute': 'wall',
      'signup': 'signup',
      'login': 'login',
      'logout': 'logout',
      'linkProvider': 'linkProvider',
      'forgotPassword': 'forgotPassword',
      'userlist': 'userlist',
      'profile': 'profile',
      'awards': 'awards'
    };

    Router.prototype.account = function(id) {
      this.params = id != null ? {
        id: id
      } : null;
      return setTemplate("/assets/templates/account.html", function() {
        return requirejs(['/assets/js/account/account_main.js'], function() {
          return Account.init();
        });
      });
    };

    Router.prototype.userlist = function() {
      return setTemplate("/assets/templates/userlist.html", function() {
        return requirejs(['/assets/js/account/account_main.js'], function() {
          return Account.loadUserList();
        });
      });
    };

    Router.prototype.profile = function() {
      return setTemplate("/assets/templates/profile.html", function() {
        return requirejs(['/assets/js/account/account_main.js'], function() {
          return Account.init();
        });
      });
    };

    Router.prototype.featuresMap = function() {
      return setTemplate("/assets/templates/maps.html", function() {
        return requirejs(['/assets/js/lib/openlayers.extended.js'], function() {
          return requirejs(['/assets/js/maps/maps.js'], function() {
            return Maps.initFeaturesMap();
          });
        });
      });
    };

    Router.prototype.markersMap = function() {
      return setTemplate("/assets/templates/maps.html", function() {
        return requirejs(['/assets/js/lib/openlayers.extended.js'], function() {
          return requirejs(['/assets/js/maps/maps.js'], function() {
            return Maps.initMarkersMap();
          });
        });
      });
    };

    Router.prototype.searchMap = function() {
      return setTemplate("/assets/templates/maps.html", function() {
        return requirejs(['/assets/js/lib/openlayers.extended.js'], function() {
          return requirejs(['/assets/js/maps/maps.js'], function() {
            return Maps.initSearchMap();
          });
        });
      });
    };

    Router.prototype.routesMap = function() {
      return setTemplate("/assets/templates/maps.html", function() {
        return requirejs(['/assets/js/lib/openlayers.extended.js'], function() {
          return requirejs(['/assets/js/maps/maps.js'], function() {
            return Maps.initRoutesMap();
          });
        });
      });
    };

    Router.prototype.photosMap = function() {
      return setTemplate("/assets/templates/maps.html", function() {
        return requirejs(['/assets/js/lib/openlayers.extended.js'], function() {
          return requirejs(['/assets/js/maps/maps.js'], function() {
            return Maps.initPhotosMap();
          });
        });
      });
    };

    Router.prototype.messages = function() {
      var subroutes;
      subroutes = this.subroutes;
      return requirejs(['/assets/js/messagesApp/collection/discussionCollection.js'], function() {
        return requirejs(['/assets/js/messagesApp/model/user.js'], function() {
          return requirejs(['/assets/js/messagesApp/collection/followedCollection.js', '/assets/js/messagesApp/view/user_view.js'], function() {
            return requirejs(['/assets/js/messagesApp/routers/router.js'], function() {
              return subroutes.messagesRouter || (subroutes.messagesRouter = new messagesApp.Router("messages/"));
            });
          });
        });
      });
    };

    Router.prototype.wall = function() {
      var subroutes;
      subroutes = this.subroutes;
      return requirejs(['/assets/js/timelineApp/collection/publicationCollection.js'], function() {
        return requirejs(['/assets/js/timelineApp/collection/newsCollection.js'], function() {
          return requirejs(['/assets/js/timelineApp/routers/router.js'], function() {
            return subroutes.timelineRouter || (subroutes.timelineRouter = new timelineApp.Router("wall/"));
          });
        });
      });
    };

    Router.prototype.awards = function() {
      return setTemplate("/assets/templates/awards.html", function() {
        return requirejs(['/assets/js/StatisticsApp.js']);
      });
    };

    Router.prototype.login = function() {
      setTemplate("/assets/templates/login.html");
      return requirejs(['/assets/js/messagesApp/routers/router.js'], function() {
        return subroutes.messagesRouter || (subroutes.messagesRouter = new messagesApp.Router("messages/"));
      });
    };

    Router.prototype.logout = function() {
      return $.get("/logout", function() {
        sessionStorage.removeItem("user");
        updateSessionViews("");
        return location.href = './';
      });
    };

    Router.prototype.signup = function() {
      return setTemplate("/assets/templates/signup.html");
    };

    Router.prototype.login = function() {
      return setTemplate("/assets/templates/login.html");
    };

    Router.prototype.linkProvider = function() {
      return setTemplate("/assets/templates/linkProvider.html");
    };

    Router.prototype.forgotPassword = function() {
      return setTemplate("/assets/templates/forgotPassword.html");
    };

    return Router;

  })(Backbone.Router);

}).call(this);
